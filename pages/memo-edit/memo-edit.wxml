<navigation-bar title="编辑备忘录" back="{{true}}" color="#333" background="#FFF"></navigation-bar>

<view class="page">
  <view class="form-container">
    <!-- 标题输入 -->
    <view class="form-item">
      <input
        class="title-input"
        placeholder="输入标题..."
        value="{{title}}"
        bindinput="onTitleInput"
        maxlength="50"
        placeholder-class="input-placeholder"
      />
    </view>

    <!-- 内容输入 -->
    <view class="form-item">
      <textarea
        class="content-input"
        placeholder="开始记录你的想法..."
        value="{{content}}"
        bindinput="onContentInput"
        maxlength="2000"
        auto-height
        placeholder-class="input-placeholder"
      ></textarea>
      <view class="char-count">{{content.length}}/2000</view>
    </view>

    <!-- 标签输入 -->
    <view class="form-item tags-item">
      <text class="label">标签</text>
      <view class="tags-container">
        <view class="tag-input-wrapper">
          <input
            class="tag-input"
            placeholder="添加标签后按回车"
            value="{{tagInput}}"
            bindinput="onTagInput"
            bindconfirm="onAddTag"
            placeholder-class="input-placeholder"
          />
        </view>
        <view class="tags-list" wx:if="{{tags.length > 0}}">
          <view class="tag-item" wx:for="{{tags}}" wx:key="*this">
            <text class="tag-text">{{item}}</text>
            <text class="tag-close" bindtap="onRemoveTag" data-index="{{index}}">×</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 颜色选择 -->
    <view class="form-item color-item">
      <text class="label">卡片颜色</text>
      <view class="color-list">
        <view
          class="color-item {{selectedColor === '' ? 'active' : ''}}"
          style="background: #fff; border: 2rpx solid #e0e0e0;"
          bindtap="onSelectColor"
          data-color=""
        ></view>
        <view
          class="color-item {{selectedColor === '#FFE5E5' ? 'active' : ''}}"
          style="background: #FFE5E5;"
          bindtap="onSelectColor"
          data-color="#FFE5E5"
        ></view>
        <view
          class="color-item {{selectedColor === '#E5F3FF' ? 'active' : ''}}"
          style="background: #E5F3FF;"
          bindtap="onSelectColor"
          data-color="#E5F3FF"
        ></view>
        <view
          class="color-item {{selectedColor === '#E8F5E9' ? 'active' : ''}}"
          style="background: #E8F5E9;"
          bindtap="onSelectColor"
          data-color="#E8F5E9"
        ></view>
        <view
          class="color-item {{selectedColor === '#FFF3E0' ? 'active' : ''}}"
          style="background: #FFF3E0;"
          bindtap="onSelectColor"
          data-color="#FFF3E0"
        ></view>
        <view
          class="color-item {{selectedColor === '#F3E5F5' ? 'active' : ''}}"
          style="background: #F3E5F5;"
          bindtap="onSelectColor"
          data-color="#F3E5F5"
        ></view>
      </view>
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-btn-wrapper">
    <button class="save-btn" bindtap="onSave" disabled="{{!title && !content}}">
      保存修改
    </button>
  </view>
</view>
